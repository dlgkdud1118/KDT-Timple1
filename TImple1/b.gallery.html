<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/style.css" />
    <title>사진 소개</title>

    <style>
    </style>
</head>

<body>
<div class="nav">
    <div class="logo">
        <img id="l_img" src="images/zoo.png" alt="#">
    </div>
    <div class="nav_btn">
        <a href="a.index.html">HOME</a>
        <a href="b.gallery.html">GALLERY</a>
        <a href="c.matching.html">MATCHING</a>
        <a href="d.game.html">GAME</a>
        <a href="e.fortune.html">FORTUNE</a>
        <a href="f.board.html">BOARD</a>
    </div>
</div>

    <h1>동물 소개</h1>
    <ul id="top">
        <li><a id="duck">오리</a></li>
        <li><a id="dog" href="#">강아지</a></li>
        <li><a id="cat" href="#">고양이</a></li>
    </ul>
    <div class="block">
    </div>
    <table>
        <tr id="image-list-row">
            <td><img></td>
            <td><img></td>
            <td><img></td>
            <td><img></td>
            <td><img></td>
            <td><img></td>
            <td><img></td>
            <td><img></td>
            <td><img></td>
            <td><img></td>
        </tr>
    </table>
    <br>
    <table id="canvas">
        <tr>
            <td id="btn_prev">⬅</td>
            <td><img></td>
            <td id="btn_next">➡</td>
            <td></td>
        </tr>
        <td colspan="3" id="btn-auto">자동보기</td>
    </table>
    <div class="block"></div>

    <footer>
        <div class="footer_img">
            <img src="images/zoo.png" alt="#">
        </div>
        <div class="footer_text">
            <span>강수림 &nbsp;</span><span>|</span>
            <span>김찬연&nbsp;</span><span>|</span>
            <span>이하영&nbsp;</span><span>|</span>
            <span>한지해&nbsp;</span><span>|</span>
            <span>한도희&nbsp;</span><span>|</span>
            <p>1조 과제입니다</p>
            <p>2022.09.11마감</p>
            <img src="images/facebook.png" alt="#">
            <img src="images/github.png" alt="#">
            <img src="images/instagram.png" alt="#">
            <img src="images/youtube.png" alt="#">
        </div>
    </footer>
    
    <script src="js/jquery-3.6.1.js"></script>
    <script type="text/javascript">
        

        window.addEventListener('load', function(event) {
           
            var table = document.querySelector("table");
            table.style.margin = "0 auto";
            

            var imgFiles = ["duck1.jpeg", "duck2.jpeg", "duck3.jpeg", "duck4.jpeg", "duck5.jpeg", "duck6.jpeg", "duck7.jpeg", "duck8.jpeg", "duck9.jpeg","duck10.jpeg"] ;
            var images = document.querySelectorAll('#image-list-row img');
            var image = event.target;
            

                for (var i = 0; i < images.length; i++) {
                    images[i].src = `images/${imgFiles[i]}`;
                    images[i].style.width = "100px";
                    images[i].style.height = "100px";
                    images[i].style.border = "solid 1px black"; 
                    images[i].setAttribute("data-idx", i);                   

                    images[i].addEventListener("click", function(event) {
                        image = event.target; 
                        currentImg.src = image.src;
                        images[currentIdx].style.border = 'solid 1px black';            // 원래대로 돌리고
                        currentIdx = image.getAttribute('data-idx');                    // getAttribute
                        images[currentIdx].style.border = 'solid 4px rgb(143, 41, 18)'; // 다시 실행
                    })
                }


            var duck = document.querySelector("#duck");
            duck.addEventListener("click", function(event) {
                imgFiles = ["duck1.jpeg", "duck2.jpeg", "duck3.jpeg", "duck4.jpeg", "duck5.jpeg", "duck6.jpeg", "duck7.jpeg", "duck8.jpeg", "duck9.jpeg","duck10.jpeg"] ;
                currentImg.src = "images/duck1.jpeg";
                images = document.querySelectorAll('#image-list-row img');
                for (var i = 0; i < images.length; i++) {
                    images[i].src = `images/${imgFiles[i]}`;
                    images[i].style.width = "100px";
                    images[i].style.height = "100px";
                    images[i].style.border = "solid 1px black";

                    images[i].addEventListener('click', function(event) {
                        var image = event.target;
                        currentImg.src = image.src;
                    })
                }
            })

            var dog = document.querySelector("#dog");
            dog.addEventListener("click", function(event) {
                imgFiles = ["dog1.jpg", "dog2.jpg", "dog3.jpg", "dog4.jpg", "dog5.jpg", "dog6.jpg", "dog7.jpg", "dog8.jpg", "dog9.jpg", "dog10.jpg",] ;
                currentImg.src = "images/dog1.jpg";
                images = document.querySelectorAll('#image-list-row img');
                for (var i = 0; i < images.length; i++) {
                    images[i].src = `images/${imgFiles[i]}`;
                    images[i].style.width = "100px";
                    images[i].style.height = "100px";
                    images[i].style.border = "solid 1px black"; 

                    images[i].addEventListener('click', function(event) {
                        image = event.target; 
                        currentImg.src = image.src;
                    })
                }   
            })
           
            var cat = document.querySelector("#cat");
            cat.addEventListener("click", function(event) {
                imgFiles = ["cat1.jpg", "cat2.jpg", "cat3.jpg", "cat4.jpg", "cat5.jpg", "cat6.jpg", "cat7.jpg", "cat8.jpg", "cat9.jpg", "cat10.jpg",] ;
                currentImg.src = "images/cat1.jpg";
                images = document.querySelectorAll('#image-list-row img');
                for (var i = 0; i < images.length; i++) {
                    images[i].src = `images/${imgFiles[i]}`;
                    images[i].style.width = "100px";
                    images[i].style.height = "100px";
                    images[i].style.border = "solid 1px black"; 

                    images[i].addEventListener('click', function(event) {
                        var image = event.target; 
                        currentImg.src = image.src;
                    })
                }   
            })


            var canvas = document.querySelector('#canvas');
            canvas.style.margin = "0 auto";           

           
            currentImg = document.querySelector("#canvas img"); 
            currentImg.style.width = "500px";
            currentImg.style.height = "500px";            
            currentImg.style.border = "solid 3px black";


            //////////////////////////////////////////////////

            var currentIdx = 0;

            currentImg.src = images[currentIdx].src;

            var nextBtn = document.querySelector("#btn_next");
            nextBtn.addEventListener("click", function(event) {                
                changeImage(true);                
            });
            var prevBtn = document.querySelector("#btn_prev");
            prevBtn.addEventListener("click", function(event) {               
                changeImage(false);
            });
            var autoBtn = document.querySelector("#btn-auto");
            autoBtn.addEventListener("click", function(event) {
                
                if ( event.target.innerText === "자동보기" ) {
                    autoChangeImage();
                    event.target.innerText = "자동보기중지";
                } else {
                    clearTimeout(timer); 
                    event.target.innerText = "자동보기";
                }
            });

            var timer = null;
            function autoChangeImage() {
                
                timer = setTimeout(autoChangeImage, 3000);
                changeImage(true);
            }

            function changeImage(moveToNext = true, rolling = true) {
                images[currentIdx].style.border = 'solid 1px black';

                if (moveToNext) {
                    if (currentIdx == images.length - 1) {
                        currentIdx = 0;                         
                    } else {
                        currentIdx++;
                    }
                } else {
                    if (currentIdx == 0) {
                        currentIdx = images.length - 1; 
                    } else {
                        currentIdx--;
                    }
                }
                currentImg.src = `images/${imgFiles[currentIdx]}`;  

                images[currentIdx].style.border = 'solid 4px rgb(143, 41, 18)';
            }

        });
    </script>
</body>
</html>